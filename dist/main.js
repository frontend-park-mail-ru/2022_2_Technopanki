(()=>{"use strict";function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}var t=r((function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),console.log("constructor called",r),this.props=r})),n="skip",o="update",i="replace",c="remove",u="append",f=function(){return{type:n}},p=function(e,r,t){return{type:o,attrUpdater:e,childrenUpdater:r,oldNode:t}},l=function(e){return{type:i,node:e}},a={remove:[],set:[],update:[]},s=Symbol("key"),y=Symbol("dom"),d=Symbol("component"),h=function(e,r,t){for(;r[0]&&r[0][0]!==t;)e.push({type:c}),r.shift()},b=function(e,r,t){for(;r[0]&&r[0][0]!==t;)e.push((n=r[0][1],{type:u,node:n})),r.shift();var n},v=function(e,r){var t=e.map((function(e){return e[0]})),n=r.map((function(e){return e[0]}));return t.find((function(e){return-1!==n.indexOf(e)}))||null},m=function(e,r){var t=[];if(!Array.isArray(e)||!Array.isArray(r))throw new Error("not array: ".concat(e,", ").concat(r));for(var n=e.map((function(e){return[e.key,e]})),o=r.map((function(e){return[e.key,e]})),i=v(n,o);i;)h(t,n,i),b(t,o,i),t.push(R(n.shift()[1],o.shift()[1])),i=v(n,o);return h(t,n,i),b(t,o,i),t};function O(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?O(Object(t),!0).forEach((function(r){g(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function g(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function j(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i=[],c=!0,u=!1;try{for(t=t.call(e);!(c=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);c=!0);}catch(e){u=!0,o=e}finally{try{c||null==t.return||t.return()}finally{if(u)throw o}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return P(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?P(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var S=function(e,r){var t=Object.entries(e).filter((function(e){var r=j(e,2),t=r[0];return r[1],"children"!==t})),n=Object.entries(r).filter((function(e){var r=j(e,2),t=r[0];return r[1],"children"!==t})),o=t.map((function(e){var r=j(e,2),t=r[0];return r[1],t})),i=n.map((function(e){var r=j(e,2),t=r[0];return r[1],t}));return{set:n.filter((function(e){var r=j(e,2),t=r[0];return r[1],-1===o.indexOf(t)})),remove:o.filter((function(e){return-1===i.indexOf(e)})),update:n.filter((function(e){var r=j(e,2),t=r[0],n=r[1];return-1!==o.indexOf(t)&&o.find((function(e){return e[0]===t&&e[1]!==n}))}))}},R=function e(r,t){if(r.$$typeof.description!==t.$$typeof.description)return l(t);if(r.$$typeof.description===y.description&&t.$$typeof.description===y.description){var n=S(r.props,t.props);return 0==n.set.length&&0==n.remove.length&&0==n.update.length&&r.props.children===t.props.children?f():function(e,r){return!e.props.children&&!e.props.children||"string"==typeof e.props.children&&"string"==typeof r.props.children}(r,t)?function(e,r){return e.props.children||e.props.children?(console.log(e.props.children,r.props.children),"string"==typeof e.props.children&&"string"==typeof r.props.children?e.props.children===r.props.children?f():p(w(w({},a),{},{update:[["textContent",r.props.children]]}),[],e):f()):f()}(r,t):Array.isArray(r.props.children)||Array.isArray(t.props.children)?p(n,m(r.props.children,t.props.children),r):p(n,[e(r.props.children,t.props.children)],r)}if(r.$$typeof.description===d.description&&t.$$typeof.description===d.description){if(console.log("Diff: ",r,t),r.type!==t.type)return l(t);var o=S(r.props,t.props);return Array.isArray(r.props.children)||Array.isArray(t.props.children)?p(o,m(r.props.children,t.props.children)):p(o,[e(r.props.children,t.props.children)],r)}throw new Error("Undefined type of node: ".concat(r.$$typeof,", ").concat(t.$$typeof))},E=function(e,r){for(var t in r)"children"!==t&&(e[t]=r[t])},$=function(e,r){if(r.$$typeof.description===y.description){var t=document.createElement(r.type);r._domElement=t,E(t,r.props),function(e,r){r&&("string"==typeof r?e.innerText=r:r.constructor===Array?r.forEach((function(r){$(e,r)})):$(e,r))}(t,r.props.children),e.appendChild(t)}else r.$$typeof.description===d.description&&function(e,r){var t=new r.type.prototype.constructor(r.props);r._domElement=e,t.rootDomRef=e,console.log(t.render()),t.prevRenderVNodeRef=t.render(),$(e,t.prevRenderVNodeRef)}(e,r)},A=function(e,r){var t=document.createElement(e);return E(t,r),t};function _(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i=[],c=!0,u=!1;try{for(t=t.call(e);!(c=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);c=!0);}catch(e){u=!0,o=e}finally{try{c||null==t.return||t.return()}finally{if(u)throw o}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return k(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?k(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var D=function(e,r){if(console.log(r),r.type!==n){if(r.type!==i)return r.type===o&&(function(e,r){r.attrUpdater.set.forEach((function(r){var t=_(r,2),n=t[0],o=t[1];return e[n]=o})),r.attrUpdater.update.forEach((function(r){var t=_(r,2),n=t[0],o=t[1];return e[n]=o})),r.attrUpdater.remove.forEach((function(r){return e.removeAttribute(r)}))}(e,r),r.childrenUpdater&&r.oldNode&&N(e,r.childrenUpdater)),e;!function(e,r){var t=document.createElement(r.type);E(t,r.props),e.replaceWith(t)}(e,r.node)}},N=function(e,r){for(var t=0,o=0;o<r.length;++o)if(r[o].type!==n){var i=r[o],f=e.childNodes[o+t];i.type!==u?i.type!==c?D(f,i):(f.remove(),t-=1):f.appendChild(A(i.node.type,i.node.props))}};function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function T(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U(e,r){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},U(e,r)}function C(e,r){if(r&&("object"===x(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var V=function(e){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&U(e,r)}(c,e);var r,t,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=I(n);if(o){var t=I(this).constructor;e=Reflect.construct(r,arguments,t)}else e=r.apply(this,arguments);return C(this,e)});function c(e){return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,e)}return r=c,t=[{key:"setState",value:function(e,r){this.state=e(this.state),console.log("setState called"),r&&r(),function(e){if(!e.rootDomRef||!e.prevRenderVNodeRef)throw new Error("rootDomRef or prevRenderVNodeRef is empty. component: ".concat(e));var r,t,n,o=e.render();console.log(o),o.$$typeof.description===d.description&&(o._instance=e),console.log(e.rootDomRef,e.prevRenderVNodeRef,o),r=e.rootDomRef,t=e.prevRenderVNodeRef,n=R(t,o),D(r,n),e.prevRenderVNodeRef=o}(this)}}],t&&T(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),c}(t),B=function(e,r,t){var n,o={$$typeof:"string"==typeof e?y:d,type:e,props:r,key:t||s};return o.$$typeof.description===d.description&&(o._instance=new o.type.prototype.constructor(r),o.props.children=null===(n=o._instance)||void 0===n?void 0:n.render()),o},H=function(e,r,t){return console.log("config: ",r),B(e,r,t)};function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function q(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function W(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?q(Object(t),!0).forEach((function(r){z(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function z(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function F(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function G(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,r,t){return r&&G(e.prototype,r),t&&G(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function K(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&L(e,r)}function L(e,r){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},L(e,r)}function Q(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=Y(e);if(r){var o=Y(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return X(this,t)}}function X(e,r){if(r&&("object"===M(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}var Z=function(e){K(t,e);var r=Q(t);function t(e){return F(this,t),r.call(this,e)}return J(t,[{key:"render",value:function(){return"div",e={className:"div",children:[H("p",{className:"counter",children:"".concat(this.props.counter)},1),H("p",{className:"hello",children:"Hello world!"},2),H("p",{className:"hello",children:"Hello world!"},3),H("p",{className:"hello",children:"Hello world!"},4),H("p",{children:"Hello world!"},5),H("button",{onclick:this.props.setState,children:"Increment"},6)]},B("div",e,undefined);var e}}]),t}(V),ee=function(e){K(t,e);var r=Q(t);function t(e){var n;return F(this,t),(n=r.call(this,e)).state={counter:2},n}return J(t,[{key:"render",value:function(){var e=this;return H("div",{children:H(Z,{counter:this.state.counter,setState:function(){console.log("set state called"),e.setState((function(e){return W(W({},e),{},{counter:e.counter+1})}))}})})}}]),t}(V);function re(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var te=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=r}var r,t;return r=e,(t=[{key:"render",value:function(e){$(this.root,e)}},{key:"unmount",value:function(){}}])&&re(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),e}();(function(e){if(!e)throw new Error("Root element: ".concat(e));return new te(e)})(document.querySelector("#root")).render(H(ee,{}))})();
//# sourceMappingURL=main.js.map